
var TemperatureOracle = web3.eth.contract([{"constant":true,"inputs":[{"name":"time","type":"uint256"}],"name":"get","outputs":[{"name":"","type":"int8"}],"type":"function"},{"constant":false,"inputs":[{"name":"temperature","type":"int8"}],"name":"set","outputs":[],"type":"function"},{"inputs":[],"type":"constructor"}]);
var temperatureoracle = TemperatureOracle.new(
   {
     from: web3.eth.accounts[0], 
     data: '606060405260018054600160a060020a0319163317905560a18060236000396000f300606060405260e060020a60003504639507d39a81146024578063faee13b914604a575b005b610e106004359081069003600090815260208181526040822054820b90910b6060908152f35b602260043560015473ffffffffffffffffffffffffffffffffffffffff90811633919091161415609e57610e104290810690036000908152602081905260409020805460ff191660f860020a808402041790555b5056', 
     gas: 1000000
   }, function(e, contract){
    if (typeof contract.address != 'undefined') {
         console.log(e, contract);
         console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
    }
 })

var tempO = TemperatureOracle.at("0x56f4a306023c0932717d55405d50ce72da2cd688", function(err,t) {
  if(err) {
    console.log("err:",err);
    return;
  }
  console.log("t obj",t);
  console.log("t address",t.address);
});


var _betEndTime = eth.getBlock("latest").timestamp + (60 * 2);
var _tempOracle = "0x56f4a306023c0932717d55405d50ce72da2cd688" ;
var _bettor1 = bettor1;
var _bettor2 = bettor2;

var weatherbetContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"b2","outputs":[{"name":"temp","type":"int8"},{"name":"addr","type":"address"},{"name":"value","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[],"name":"kill","outputs":[],"type":"function"},{"constant":false,"inputs":[],"name":"payWinner","outputs":[],"type":"function"},{"constant":true,"inputs":[],"name":"b1","outputs":[{"name":"temp","type":"int8"},{"name":"addr","type":"address"},{"name":"value","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"temperature","type":"int8"}],"name":"betOn","outputs":[],"type":"function"},{"inputs":[{"name":"_betEndTime","type":"uint256"},{"name":"_tempOracle","type":"address"},{"name":"_bettor1","type":"address"},{"name":"_bettor2","type":"address"}],"type":"constructor"}]);
var weatherbet = weatherbetContract.new(
   _betEndTime,
   _tempOracle,
   _bettor1,
   _bettor2,
   {
     from: web3.eth.accounts[0], 
     data: '606060405260405160808061047d833960e06040529051905160a05160c05160059390935560068054600160a060020a03199081169093179055600180546003805491851690931760a060020a60ff021990811690925590921690921716905561040f8061006e6000396000f300606060405260e060020a60003504630add6ef2811461004757806341c0e1b51461006b578063be71248a146100a7578063ee495002146100c4578063fc687311146100e7575b005b61012a60035460045460a060020a820460000b91600160a060020a0316905b909192565b610045600154600160a060020a0390811633919091161480159061009f5750600354600160a060020a039081163390911614155b15610156575b565b61004560006000600060006005600050544210156101e0576101da565b61012a60015460025460a060020a820460000b91600160a060020a031690610066565b61004560043560005460ff16806100ff575060055442115b1561034157604051600160a060020a03331690600090349082818181858883f1935050505050610400565b6040805160009490940b8452600160a060020a0392909216602084015282820152519081900360600190f35b604051600154600254600160a060020a0391909116916000919082818181858883f150600354600454600160a060020a03919091169450915082818181858883f193505050505033600160a060020a0316ff5b604051600354600160a060020a031690600090839082818181858883f150505050505b6000805460ff191660011790555b50505050565b60005460ff16156101f0576101da565b604080516006546005547f9507d39a00000000000000000000000000000000000000000000000000000000835260048301529151600160a060020a039290921691639507d39a9160248181019260209290919082900301816000876161da5a03f11561000257505060405151600154909550610278915060a060020a900460000b850361028f565b6003549093506102a29060a060020a900460000b85035b600081810b81901261040357508061040a565b915030600160a060020a03163190508160000b8360000b141561030b57604051600154600254600160a060020a0391909116916000919082818181858883f150600354600454600160a060020a03919091169450915082818181858883f19350505050506101cc565b8160000b8360000b12156101a957604051600154600160a060020a031690600090839082818181858883f19350505050506101cc565b600154600160a060020a03908116339091161415610390576001805474ff0000000000000000000000000000000000000000191660f860020a8381020460a060020a0217905534600255610400565b600354600160a060020a039081163390911614156103df576003805474ff0000000000000000000000000000000000000000191660f860020a8381020460a060020a0217905534600455610400565b604051600160a060020a03331690600090349082818181858883f150505050505b50565b8160000390505b91905056', 
     gas: 1000000
   }, function(e, contract){
    if (typeof contract.address != 'undefined') {
         console.log(e, contract);
         console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
    }
 });


weatherbet.betOn.sendTransaction(16, {from: bettor1, value: web3.toWei(100, "ether")});
weatherbet.betOn.sendTransaction(19, {from: bettor2, value: web3.toWei(300, "ether")});
